# Database Seeder

این فولدر شامل seeder های دیتابیس است.

## اجرای Seeder

برای اجرای تمام seeder ها (ادمین و شهرها):

```bash
cd /root/kisty/backend/src/api/project-name
npm run seed:admin
```

یا:

```bash
npx ts-node -r tsconfig-paths/register src/database/seeds/run-seed.ts
```

## Seeder ادمین

Seeder ادمین یک کاربر Super Admin ایجاد می‌کند یا به‌روزرسانی می‌کند.

### اطلاعات Super Admin

- **شماره موبایل:** 09123456789
- **رمز عبور:** admin123
- **نام:** Super Admin
- **ایمیل:** admin@keesti.com
- **نقش:** ADMIN

### نکات Seeder ادمین

- اگر کاربر با این شماره موبایل وجود داشته باشد، اطلاعات آن به‌روزرسانی می‌شود
- اگر کاربر وجود نداشته باشد، یک کاربر جدید ایجاد می‌شود
- رمز عبور همیشه به‌روزرسانی می‌شود

## Seeder شهرها

Seeder شهرها شهرهای ایران را از پوشه `/root/doc/06 CITIES` می‌خواند و در دیتابیس ایجاد می‌کند.

### عملکرد Seeder شهرها

1. **خواندن پوشه‌های شهرها:** از پوشه `/root/doc/06 CITIES` تمام پوشه‌های شهرها را می‌خواند
2. **جستجوی عکس‌ها:** در هر پوشه شهر، به دنبال فایل‌های تصویری (png, jpg, jpeg, webp) می‌گردد
3. **کپی عکس‌ها:** اگر عکسی پیدا شود، آن را به پوشه `uploads/cities` کپی می‌کند
4. **ایجاد شهر:** شهر را با اطلاعات زیر در دیتابیس ایجاد می‌کند:
   - عنوان شهر (به فارسی)
   - اسلاگ (از عنوان تولید می‌شود)
   - توضیحات (در صورت وجود)
   - مسیر عکس (در صورت وجود)
   - وضعیت فعال

### شهرهای پشتیبانی شده

- تهران
- اصفهان
- مشهد
- تبریز
- شیراز
- کرج
- اهواز
- قم
- کرمانشاه
- ارومیه
- رشت
- زنجان
- همدان
- کرمان
- اراک

### نکات Seeder شهرها

- اگر شهری با همان اسلاگ وجود داشته باشد، از ایجاد مجدد آن جلوگیری می‌شود
- اگر شهری وجود داشته باشد اما عکس نداشته باشد و عکس جدید پیدا شود، عکس اضافه می‌شود
- اگر فایل تصویری در پوشه شهر یافت نشود، شهر بدون عکس ایجاد می‌شود
- پوشه `uploads/cities` به صورت خودکار ایجاد می‌شود

