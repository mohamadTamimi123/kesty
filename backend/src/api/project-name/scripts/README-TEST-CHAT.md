# راهنمای تست ماژول چت

## مراحل تست

### 1. بک‌آپ و Reset دیتابیس

```bash
cd /root/kisty/backend/src/api/project-name
pnpm ts-node -r tsconfig-paths/register scripts/reset-and-seed-db.ts
```

این اسکریپت:
- یک بک‌آپ از دیتابیس می‌سازد
- تمام جداول را پاک می‌کند
- جداول را دوباره با migration های جدید می‌سازد (شامل فیلد metadata)
- seeders را اجرا می‌کند

### 2. ایجاد پروژه‌های تستی

```bash
cd /root/kisty/backend/src/api/project-name
pnpm ts-node -r tsconfig-paths/register scripts/test-project-creation.ts
```

این اسکریپت:
- 3 پروژه تستی برای کاربر "فرهاد صادقی" ایجاد می‌کند
- پروژه‌ها به صورت خودکار به تولیدکنندگان مرتبط توزیع می‌شوند
- مکالمات و پیام‌های توزیع پروژه ایجاد می‌شوند

### 3. تست چت

1. وارد حساب کاربری تولیدکننده شوید
2. به بخش چت بروید
3. باید مکالمات جدید را ببینید که شامل:
   - کارت زیبای پروژه با اطلاعات کامل
   - دکمه "مشاهده پروژه"
   - دکمه "ارسال پیشنهاد"

4. روی "ارسال پیشنهاد" کلیک کنید و پیشنهاد را ارسال کنید
5. بعد از ارسال پیشنهاد، باید کارت زیبای پیشنهاد را در چت ببینید

## ویژگی‌های جدید

### کارت پیام پروژه
- نمایش زیبا با گرادیانت آبی
- نمایش عنوان، توضیحات، دسته‌بندی و شهر
- دکمه‌های اکشن زیبا

### کارت پیام پیشنهاد
- نمایش زیبا با گرادیانت سبز
- نمایش قیمت و زمان تحویل
- دکمه مشاهده پروژه

### مکالمه جداگانه برای هر پروژه
- هر پروژه مکالمه مخصوص خود را دارد
- دیگر همه پروژه‌ها در یک مکالمه نیستند
